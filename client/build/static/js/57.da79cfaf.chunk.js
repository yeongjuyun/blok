"use strict";(self.webpackChunkinitproject=self.webpackChunkinitproject||[]).push([[57],{57:function(e,n,t){t.r(n),t.d(n,{default:function(){return A}});var r,i,a,o,l,u,s=t(4165),c=t(5861),d=t(885),p=t(168),f=t(2791),h=t(6681),g=t(4476),v=t(5174),x=t(9434),b=t(1876),m=t(3668),y=t(9513),w=t.n(y),_=(t(8639),t(1242)),L=t(5579),T=t(4569),D=t.n(T),j=t(3264),Z=t.n(j),E=t(3329),I=_.ZP.div(r||(r=(0,p.Z)(["\n  position: relative;\n  display: flex;\n  flex-wrap: wrap;\n"]))),U=_.ZP.img(i||(i=(0,p.Z)(["\n  flex: 0 0 33.333333%;\n  width: 100px;\n  height: 100px;\n  margin: 5px;\n  border-radius: 10px;\n  cursor: pointer;\n"]))),N=_.ZP.img(a||(a=(0,p.Z)(["\n  width: 100px;\n  height: 100px;\n  margin: 5px;\n  padding: 10px;\n  border: 1px solid lightgray;\n  border-radius: 10px;\n  box-sizing: border-box;\n  cursor: pointer;\n"]))),P=_.ZP.img(o||(o=(0,p.Z)(["\n  width: 25px;\n  height: 25px;\n  padding: 8px;\n  border-radius: 100%;\n  position: absolute;\n  right: 0;\n  z-index: 20;\n"])));function k(e){(0,L.TL)();var n=f.useState([]),t=(0,d.Z)(n,2),r=t[0],i=t[1];return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(Z(),{multiple:!0,value:r,onChange:function(e,n){console.log(e,n),i(e);e.map((function(e){return e.dataURL}))},maxNumber:9,children:function(e){var n=e.imageList,t=e.onImageUpload,r=e.onImageRemove;return(0,E.jsx)("div",{className:"upload__image-wrapper",children:(0,E.jsxs)(I,{children:[(0,E.jsx)(N,{src:m.PD,alt:"upload",onClick:t}),n.map((function(e,n){return(0,E.jsxs)(I,{className:"image-item",children:[(0,E.jsx)(U,{src:e.dataURL,alt:"image",width:"100"}),(0,E.jsx)(P,{src:m.x2,alt:"close",onClick:function(){return r(n)}})]},n)}))]})})}})})}_.ZP.div(l||(l=(0,p.Z)(["\n  display: flex;\n"]))),(0,_.ZP)(w())(u||(u=(0,p.Z)(["\n  font-size: 16px;\n  line-height: 19px;\n  width: 100%;\n  height: 48px;\n  border: 1px solid #ececec;\n  box-sizing: border-box;\n  padding: 15px 19px;\n  border-radius: 5px;\n"])));var A=function(e){var n,t,r=e.blockId,i=e.onRemove,a=(0,x.v9)((function(e){return(0,b.tj)(e,r)})),o=a.id,l=a.template,u=a.data,p=a.isCardOpened,y=(0,v.Eo)(l),w=(0,v.yZ)(l),_=(0,L.TL)(),T=(0,f.useState)(w),j=(0,d.Z)(T,2),Z=j[0],I=j[1],U=(0,f.useState)(null===(n=u.body)||void 0===n?void 0:n.value),N=(0,d.Z)(U,2),P=N[0],A=N[1],F=(0,f.useState)(null===(t=u.header)||void 0===t?void 0:t.value),O=(0,d.Z)(F,2),R=O[0],S=O[1],C=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(n){var t,r,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=new FormData,r=0;r<n.length;r++)t.append("file",n[r]);return i={headers:{"Content-Type":"multipart/form-data"}},e.next=5,D().post("/api/site/images",t,i);case 5:e.sent,console.log(n),_((0,b.sK)({blockId:o,field:"images",value:n}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(g.Z,{title:"Gallery",onRemove:i,icon:m.ri,isCardOpened:p,blockId:r,children:[(0,E.jsx)(h.AP,{title:"\uc2a4\ud0c0\uc77c",required:!0,guideline:"\uc2a4\ud0c0\uc77c\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694.",placeholder:"\uc6d0\ud558\ub294 \uc120\ud0dd\uc9c0\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694",options:y,onChange:function(e){I(e),_((0,b.QB)({blockId:o,newTemplate:e.value}))},value:Z}),(0,E.jsx)(h.oi,{title:"\ud0c0\uc774\ud2c0",required:!0,guideline:"\ud5e4\ub4dc\ub77c\uc778\uc5d0 \ud45c\uc2dc\ub420 \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694.",value:R,onChange:function(e){S(e.target.value),_((0,b.sK)({blockId:o,field:"header",value:{value:e.target.value}}))}}),(0,E.jsx)(h.oi,{title:"\ucd94\uac00 \ubb38\uad6c",required:!1,guideline:"\uc124\uba85\uc5d0 \ud45c\uc2dc\ub420 \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694",value:P,onChange:function(e){A(e.target.value),_((0,b.sK)({blockId:o,field:"body",value:{value:e.target.value}}))}}),(0,E.jsx)(h.XS,{title:"\uc774\ubbf8\uc9c0",guideline:"\uc0ac\uc774\ud2b8\uc5d0 \ud45c\uc2dc\ud560 \uc774\ubbf8\uc9c0\ub97c \uc5c5\ub85c\ub4dc\ud558\uc138\uc694",onChange:C}),(0,E.jsx)(k,{id:o})]})})}},4476:function(e,n,t){t.d(n,{Z:function(){return E}});var r,i,a,o,l,u,s,c,d,p,f=t(168),h=t(1242),g=t(3668),v=(t(2791),t(9434)),x=t(1876),b=t(3329),m=h.ZP.div(r||(r=(0,f.Z)(["\n  background: #ffffff;\n  border: 1px solid #efefef;\n  border-radius: ",";\n  position: relative;\n  width: 100%;\n  height: 60px;\n  display: flex;\n  padding: 0px 24px;\n  box-sizing: border-box;\n  & * {\n    user-select: none;\n    user-drag: none;\n  }\n"])),(function(e){return!0===e.isOpened?"12px 12px 0 0":"12px"})),y=h.ZP.div(i||(i=(0,f.Z)(["\n  width: 100%;\n"]))),w=h.ZP.div(a||(a=(0,f.Z)(["\n  background: #ffffff;\n  border: 1px solid #efefef;\n  border-top: none;\n  padding: 24px;\n  box-sizing: border-box;\n  border-radius: 0 0 12px 12px;\n  div:first-child {\n    margin-top: 0px;\n  }\n"]))),_=h.ZP.img(o||(o=(0,f.Z)(["\n  width: 22px;\n  height: 22px;\n  margin: auto 0;\n  &:hover {\n    cursor: ",";\n  }\n  &:active {\n    cursor: ",";\n  }\n"])),(function(e){return e.pinned?"not-allowed":"grab"}),(function(e){return e.pinned?"not-allowed":"grabbing"})),L=h.ZP.div(l||(l=(0,f.Z)(["\n  font-weight: 600;\n  font-size: 18px;\n  display: flex;\n  margin-left: 20px;\n"]))),T=h.ZP.span(u||(u=(0,f.Z)(["\n  margin: auto 0;\n  margin-left: 16px;\n  padding-top: 2px;\n"]))),D=h.ZP.img(s||(s=(0,f.Z)(["\n  width: 24px;\n  height: 24px;\n  margin: auto 0;\n"]))),j=h.ZP.img(c||(c=(0,f.Z)(["\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  padding: 10px;\n  right: 64px;\n  top: 9px;\n  transition: opacity 0.3s;\n  &:hover {\n    cursor: pointer;\n    opacity: 0.6;\n  }\n"]))),Z=h.ZP.img(d||(d=(0,f.Z)(["\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  padding: 10px;\n  right: 22px;\n  top: 9px;\n  transition: transform 0.4s;\n  &:hover {\n    cursor: pointer;\n  }\n  ","\n"])),(function(e){return e.isOpened&&(0,h.iv)(p||(p=(0,f.Z)(["\n      transform: rotate(180deg);\n    "])))})),E=function(e){var n,t=(0,v.I0)(),r=null!==(n=e.isCardOpened)&&void 0!==n&&n;return(0,b.jsxs)(y,{children:[(0,b.jsxs)(m,{isOpened:r,children:[(0,b.jsx)(_,{pinned:!!e.pinned,src:e.pinned?g.lO:g.Tp,alt:""}),(0,b.jsxs)(L,{children:[(0,b.jsx)(D,{src:e.icon,alt:""}),(0,b.jsx)(T,{children:e.title})]}),(0,b.jsx)(j,{src:g.rF,alt:"",onClick:e.onRemove}),(0,b.jsx)(Z,{src:g.Rk,alt:"",isOpened:r,onClick:function(){var n;t((0,x.cQ)(null!==(n=e.blockId)&&void 0!==n?n:""))}})]}),r&&(0,b.jsx)(w,{isOpened:r,children:e.children})]})}},4903:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_DATA_URL_KEY=n.INIT_MAX_NUMBER=n.DEFAULT_NULL_INDEX=void 0,n.DEFAULT_NULL_INDEX=-1,n.INIT_MAX_NUMBER=1e3,n.DEFAULT_DATA_URL_KEY="dataURL"},3264:function(e,n,t){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t),Object.defineProperty(e,r,{enumerable:!0,get:function(){return n[t]}})}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),a=this&&this.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&i(n,e,t);return a(n,e),n},l=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(n){a(n)}}function l(e){try{u(r.throw(e))}catch(n){a(n)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,l)}u((r=r.apply(e,n||[])).next())}))},u=this&&this.__generator||function(e,n){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=n.call(e,o)}catch(l){a=[6,l],r=0}finally{t=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},s=this&&this.__spreadArrays||function(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;var r=Array(e),i=0;for(n=0;n<t;n++)for(var a=arguments[n],o=0,l=a.length;o<l;o++,i++)r[i]=a[o];return r};Object.defineProperty(n,"__esModule",{value:!0});var c=o(t(2791)),d=t(6842),p=t(2718),f=t(4903);n.default=function(e){var n=e.value,t=void 0===n?[]:n,i=e.onChange,a=e.onError,o=e.children,h=e.dataURLKey,g=void 0===h?f.DEFAULT_DATA_URL_KEY:h,v=e.multiple,x=void 0!==v&&v,b=e.maxNumber,m=void 0===b?f.INIT_MAX_NUMBER:b,y=e.acceptType,w=e.maxFileSize,_=e.resolutionWidth,L=e.resolutionHeight,T=e.resolutionType,D=e.inputProps,j=void 0===D?{}:D,Z=e.allowNonImageType,E=void 0!==Z&&Z,I=t||[],U=c.useRef(null),N=c.useState(f.DEFAULT_NULL_INDEX),P=N[0],k=N[1],A=c.useState(null),F=A[0],O=A[1],R=c.useState(!1),S=R[0],C=R[1],M=c.useCallback((function(){return d.openFileDialog(U)}),[U]),V=c.useCallback((function(){k(f.DEFAULT_NULL_INDEX),M()}),[M]),z=c.useCallback((function(){null===i||void 0===i||i([])}),[i]),X=function(e){return l(void 0,void 0,void 0,(function(){var n;return u(this,(function(t){switch(t.label){case 0:return[4,p.getErrorValidation({fileList:e,maxFileSize:w,maxNumber:m,acceptType:y,keyUpdate:P,resolutionType:T,resolutionWidth:_,resolutionHeight:L,value:I,allowNonImageType:E})];case 1:return(n=t.sent())?(O(n),null===a||void 0===a||a(n,e),[2,!1]):(F&&O(null),[2,!0])}}))}))},B=function(e){return l(void 0,void 0,void 0,(function(){var n,t,r,a,o;return u(this,(function(l){switch(l.label){case 0:return e?[4,d.getListFiles(e,g)]:[2];case 1:return(n=l.sent()).length?[4,X(n)]:[2];case 2:if(!l.sent())return[2];if(r=[],P>f.DEFAULT_NULL_INDEX)a=n[0],(t=s(I))[P]=a,r.push(P);else if(x)for(t=s(I,n),o=I.length;o<t.length;o+=1)r.push(o);else t=[n[0]],r.push(0);return null===i||void 0===i||i(t,r),[2]}}))}))},K=c.useMemo((function(){return d.getAcceptTypeString(y,E)}),[y,E]);return c.default.createElement(c.default.Fragment,null,c.default.createElement("input",r({type:"file",accept:K,ref:U,multiple:x&&P===f.DEFAULT_NULL_INDEX,onChange:function(e){return l(void 0,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,B(e.target.files)];case 1:return n.sent(),P>f.DEFAULT_NULL_INDEX&&k(f.DEFAULT_NULL_INDEX),U.current&&(U.current.value=""),[2]}}))}))},style:{display:"none"}},j)),null===o||void 0===o?void 0:o({imageList:I,onImageUpload:V,onImageRemoveAll:z,onImageUpdate:function(e){k(e),M()},onImageRemove:function(e){var n=s(I);Array.isArray(e)?e.forEach((function(e){n.splice(e,1)})):n.splice(e,1),null===i||void 0===i||i(n)},errors:F,dragProps:{onDrop:function(e){e.preventDefault(),e.stopPropagation(),C(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&B(e.dataTransfer.files)},onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.items&&e.dataTransfer.items.length>0&&C(!0)},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),C(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDragStart:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.clearData()}},isDragging:S}))}},6842:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getListFiles=n.getImage=n.getBase64=n.getAcceptTypeString=n.openFileDialog=void 0,n.openFileDialog=function(e){e.current&&e.current.click()},n.getAcceptTypeString=function(e,n){return(null===e||void 0===e?void 0:e.length)?e.map((function(e){return"."+e})).join(", "):n?"":"image/*"},n.getBase64=function(e){var n=new FileReader;return new Promise((function(t){n.addEventListener("load",(function(){return t(String(n.result))})),n.readAsDataURL(e)}))},n.getImage=function(e){var n=new Image;return new Promise((function(t){n.addEventListener("load",(function(){return t(n)})),n.src=URL.createObjectURL(e)}))},n.getListFiles=function(e,t){for(var r=[],i=0;i<e.length;i+=1)r.push(n.getBase64(e[i]));return Promise.all(r).then((function(n){return n.map((function(n,r){var i;return(i={})[t]=n,i.file=e[r],i}))}))}},2718:function(e,n,t){var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(n){a(n)}}function l(e){try{u(r.throw(e))}catch(n){a(n)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,l)}u((r=r.apply(e,n||[])).next())}))},i=this&&this.__generator||function(e,n){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=n.call(e,o)}catch(l){a=[6,l],r=0}finally{t=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.getErrorValidation=n.isMaxNumberValid=n.isAcceptTypeValid=n.isMaxFileSizeValid=n.isImageValid=n.isResolutionValid=void 0;var a=t(4903),o=t(6842);n.isResolutionValid=function(e,n,t,r){if(void 0===t&&(t=0),void 0===r&&(r=1),!t||!r||!e.width||!e.height)return!0;switch(n){case"absolute":if(e.width===t&&e.height===r)return!0;break;case"ratio":var i=t/r;if(e.width/e.height===i)return!0;break;case"less":if(e.width<=t&&e.height<=r)return!0;break;case"more":if(e.width>=t&&e.height>=r)return!0}return!1},n.isImageValid=function(e){return!!e.includes("image")},n.isMaxFileSizeValid=function(e,n){return!n||e<=n},n.isAcceptTypeValid=function(e,n){if(e&&e.length>0){var t=n.split(".").pop()||"";if(e.findIndex((function(e){return e.toLowerCase()===t.toLowerCase()}))<0)return!1}return!0},n.isMaxNumberValid=function(e,n,t){if(0!==n&&!n)return!0;if(t===a.DEFAULT_NULL_INDEX){if(e<=n)return!0}else if(e<=n+1)return!0;return!1},n.getErrorValidation=function(e){var t=e.fileList,a=e.value,l=e.maxNumber,u=e.keyUpdate,s=e.acceptType,c=e.maxFileSize,d=e.resolutionType,p=e.resolutionWidth,f=e.resolutionHeight,h=e.allowNonImageType;return r(void 0,void 0,void 0,(function(){var e,r,g,v;return i(this,(function(i){switch(i.label){case 0:return e={},n.isMaxNumberValid(t.length+a.length,l,u)?[3,1]:(e.maxNumber=!0,[3,5]);case 1:r=0,i.label=2;case 2:return r<t.length?(g=t[r].file)?(h||n.isImageValid(g.type))&&n.isAcceptTypeValid(s,g.name)?n.isMaxFileSizeValid(g.size,c)?d?[4,o.getImage(g)]:[3,4]:(e.maxFileSize=!0,[3,5]):(e.acceptType=!0,[3,5]):[3,4]:[3,5];case 3:if(v=i.sent(),!n.isResolutionValid(v,d,p,f))return e.resolution=!0,[3,5];i.label=4;case 4:return r+=1,[3,2];case 5:return Object.values(e).find(Boolean)?[2,e]:[2,null]}}))}))}}}]);
//# sourceMappingURL=57.da79cfaf.chunk.js.map